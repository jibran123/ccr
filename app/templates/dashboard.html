{% extends "base.html" %}

{% block title %}Dashboard - Common Configuration Repository (CCR){% endblock %}

{% block additional_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}?v=1764775793">
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Time Period Filter -->
    <div class="time-period-filter">
        <button class="filter-btn active" data-period="all">All Time</button>
        <button class="filter-btn" data-period="30d">Last 30 Days</button>
        <button class="filter-btn" data-period="7d">Last 7 Days</button>
    </div>

    <!-- Executive Summary Cards -->
    <div class="summary-cards">
        <div class="summary-card card-purple">
            <div class="card-icon"><i class="fas fa-database"></i></div>
            <div class="card-content">
                <h3>Total APIs</h3>
                <p class="card-value" id="totalApis">-</p>
            </div>
        </div>
        <div class="summary-card card-blue">
            <div class="card-icon"><i class="fas fa-server"></i></div>
            <div class="card-content">
                <h3>Total Deployments</h3>
                <p class="card-value" id="totalDeployments">-</p>
            </div>
        </div>
        <div class="summary-card card-green">
            <div class="card-icon"><i class="fas fa-check-circle"></i></div>
            <div class="card-content">
                <h3>Active Deployments</h3>
                <p class="card-value" id="activeDeployments">-</p>
            </div>
        </div>
        <div class="summary-card card-orange">
            <div class="card-icon"><i class="fas fa-clock"></i></div>
            <div class="card-content">
                <h3>Recent Changes</h3>
                <p class="card-value" id="recentChanges">-</p>
            </div>
        </div>
    </div>

    <!-- Charts Row 1 -->
    <div class="charts-row">
        <div class="chart-container">
            <h3><i class="fas fa-cube"></i> Platform Distribution</h3>
            <canvas id="platformChart"></canvas>
        </div>
        <div class="chart-container">
            <h3><i class="fas fa-layer-group"></i> Environment Distribution</h3>
            <canvas id="environmentChart"></canvas>
        </div>
    </div>

    <!-- Charts Row 2 -->
    <div class="charts-row">
        <div class="chart-container">
            <h3><i class="fas fa-info-circle"></i> Status Overview</h3>
            <canvas id="statusChart"></canvas>
        </div>
        <div class="chart-container timeline-container">
            <h3><i class="fas fa-history"></i> Recent Activity</h3>
            <div id="recentActivity" class="timeline">
                <!-- Timeline items will be inserted here -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block additional_js %}
<!-- Chart.js served locally for production environments without internet access -->
<script src="{{ url_for('static', filename='js/chart.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/dashboard.js') }}?v=20251203-2"></script>
{% endblock %}
